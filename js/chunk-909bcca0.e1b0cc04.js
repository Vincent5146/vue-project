(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-909bcca0"],{"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("da84"),s=c("d039"),o=c("e8b5"),r=c("861d"),i=c("7b0b"),u=c("07fa"),d=c("8418"),l=c("65f0"),h=c("1dde"),b=c("b622"),p=c("2d00"),f=b("isConcatSpreadable"),g=9007199254740991,j="Maximum allowed index exceeded",O=a.TypeError,m=p>=51||!s((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),v=h("concat"),y=function(t){if(!r(t))return!1;var e=t[f];return void 0!==e?!!e:o(t)},w=!m||!v;n({target:"Array",proto:!0,forced:w},{concat:function(t){var e,c,n,a,s,o=i(this),r=l(o,0),h=0;for(e=-1,n=arguments.length;e<n;e++)if(s=-1===e?o:arguments[e],y(s)){if(a=u(s),h+a>g)throw O(j);for(c=0;c<a;c++,h++)c in s&&d(r,h,s[c])}else{if(h>=g)throw O(j);d(r,h++,s)}return r.length=h,r}})},a200:function(t,e,c){},d398:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a=function(t){return Object(n["C"])("data-v-d4e80dec"),t=t(),Object(n["A"])(),t},s={class:"cart"},o={class:"container"},r=a((function(){return Object(n["h"])("div",{class:"d-flex justify-content-center"},[Object(n["h"])("h1",{class:"fs-2 fw-bold"},"購物車清單")],-1)})),i={class:"table-responsive-md mt-4"},u={class:"table lh-lg"},d=a((function(){return Object(n["h"])("thead",{class:"table-dark text-center"},[Object(n["h"])("tr",{class:"table-nowrap"},[Object(n["h"])("th",{width:"100"}),Object(n["h"])("th",null,"商品名稱"),Object(n["h"])("th",{width:"200",class:"text-end"},"單價"),Object(n["h"])("th",{width:"250"},"數量"),Object(n["h"])("th",{width:"200",class:"text-end"},"價格")])],-1)})),l={class:"text-center"},h=["onClick"],b=a((function(){return Object(n["h"])("span",{class:"material-icons"},[Object(n["h"])("i",{class:"fas fa-trash"})],-1)})),p=[b],f={class:"text-end"},g={class:"d-flex justify-content-center"},j={class:"input-group",style:{width:"110px"}},O=["onClick"],m=["onUpdate:modelValue"],v=["onClick"],y={class:"text-end"},w=a((function(){return Object(n["h"])("br",null,null,-1)})),C={key:0,class:"text-strong"},x={class:"text-center"},k={key:0},L=a((function(){return Object(n["h"])("td",{colspan:"4",class:"text-end"},"總價 :",-1)})),$={class:"text-end"},_={key:1},z=a((function(){return Object(n["h"])("td",{colspan:"4",class:"text-end text-strong"},"折扣價 :",-1)})),q={class:"text-strong text-end"},M={key:0,class:"input-group mb-3 input-group-sm",style:{"justify-content":"flex-end"}},P={class:"input-group-append"},T={key:1,class:"d-flex justify-content-between mt-5"},N={key:2,class:"text-center pt-4"},J=a((function(){return Object(n["h"])("h3",{class:"fw-bold"},"購物車還沒有任何商品，趕快挑選產品加入購物車 !",-1)}));function S(t,e,c,a,b,S){var U=Object(n["J"])("Loading");return Object(n["z"])(),Object(n["g"])("div",s,[Object(n["k"])(U,{active:b.isLoading},null,8,["active"]),Object(n["h"])("div",o,[r,Object(n["h"])("div",i,[Object(n["h"])("table",u,[d,Object(n["h"])("tbody",l,[(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["H"])(b.carts,(function(e){return Object(n["z"])(),Object(n["g"])("tr",{class:"table-nowrap",key:e.id},[Object(n["h"])("td",null,[Object(n["h"])("a",{href:"#",onClick:Object(n["Z"])((function(t){return S.delCart(e.id)}),["prevent"])},p,8,h)]),Object(n["h"])("td",null,Object(n["M"])(e.product.title),1),Object(n["h"])("td",f,"NT$ "+Object(n["M"])(t.$filters.currency(e.product.price))+" 元",1),Object(n["h"])("td",null,[Object(n["h"])("div",g,[Object(n["h"])("div",j,[Object(n["h"])("button",{class:"btn btn-dark btn-sm btn-hover rounded-0 border-0",style:{width:"29px"},type:"button",onClick:function(t){return S.updateCart(e.id,e.qty-1)}}," - ",8,O),Object(n["Y"])(Object(n["h"])("input",{type:"text",class:"form-control text-center",disabled:"","onUpdate:modelValue":function(t){return e.qty=t}},null,8,m),[[n["S"],e.qty,void 0,{number:!0}]]),Object(n["h"])("button",{class:"btn btn-dark btn-sm btn-hover rounded-0 border-0",style:{width:"29px"},type:"button",onClick:function(t){return S.updateCart(e.id,e.qty+1)}}," + ",8,v)])])]),Object(n["h"])("td",y,[Object(n["j"])(" NT$ "+Object(n["M"])(t.$filters.currency(e.final_total))+" 元 ",1),w,e.final_total!==e.total?(Object(n["z"])(),Object(n["g"])("small",C,"( 已套用優惠碼 )")):Object(n["f"])("",!0)])])})),128))]),Object(n["h"])("tfoot",x,[0!==b.carts.length?(Object(n["z"])(),Object(n["g"])("tr",k,[L,Object(n["h"])("td",$,"NT$ "+Object(n["M"])(t.$filters.currency(b.total))+" 元",1)])):Object(n["f"])("",!0),b.final_total!==b.total?(Object(n["z"])(),Object(n["g"])("tr",_,[z,Object(n["h"])("td",q,"NT$ "+Object(n["M"])(t.$filters.currency(b.final_total))+" 元",1)])):Object(n["f"])("",!0)])])]),0!==b.carts.length?(Object(n["z"])(),Object(n["g"])("div",M,[Object(n["Y"])(Object(n["h"])("input",{type:"text",class:"coupon","onUpdate:modelValue":e[0]||(e[0]=function(t){return b.coupon_code=t}),placeholder:"請輸入優惠碼"},null,512),[[n["S"],b.coupon_code]]),Object(n["h"])("div",P,[Object(n["h"])("button",{class:"btn btn-dark btn-hover rounded-0 border-0",type:"button",onClick:e[1]||(e[1]=function(t){return S.addCouponCode()})}," 套用優惠碼 ")])])):Object(n["f"])("",!0),0!==b.carts.length?(Object(n["z"])(),Object(n["g"])("div",T,[Object(n["h"])("button",{type:"button",class:"btn btn-outline-dark btn-hover rounded-0",onClick:e[2]||(e[2]=function(){return S.goProducts&&S.goProducts.apply(S,arguments)})}," 回商品列表 "),Object(n["h"])("button",{type:"button",class:"btn btn-dark btn-hover rounded-0",onClick:e[3]||(e[3]=function(){return S.goCheckout&&S.goCheckout.apply(S,arguments)})}," 下一步 填寫資料 ")])):Object(n["f"])("",!0),0===b.carts.length?(Object(n["z"])(),Object(n["g"])("div",N,[J,Object(n["h"])("button",{type:"button",class:"btn btn-dark btn-hover rounded-0 mt-5",onClick:e[4]||(e[4]=function(){return S.goProducts&&S.goProducts.apply(S,arguments)})}," 查看產品 Go ")])):Object(n["f"])("",!0)])])}c("99af");var U={name:"Cart",data:function(){return{isLoading:!1,carts:[],total:0,final_total:0,coupon_code:""}},methods:{getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wwin5146","/cart");this.isLoading=!0,this.$http.get(e).then((function(e){e.data.success&&(t.carts=e.data.data.carts,t.total=e.data.data.total,t.final_total=e.data.data.final_total,t.isLoading=!1)})).catch((function(e){console.warn(e,"error"),t.isLoading=!1}))},addtoCart:function(t,e){var c=this,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wwin5146","/cart/").concat(t),a={product_id:t,qty:e};this.isLoading=!0,this.$http.put(n,{data:a}).then((function(t){t.data.success?(c.emitter.emit("message:push",{message:t.data.message,status:"success"}),c.emitter.emit("resetCart"),c.getCart(),c.isLoading=!1):(c.emitter.emit("message:push",{message:t.data.message,status:"danger"}),c.isLoading=!1)})).catch((function(t){console.warn(t,"error"),c.isLoading=!1}))},updateCart:function(t,e){var c=this,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wwin5146","/cart/").concat(t),a={product_id:t,qty:e};a.qty>0&&this.$http.put(n,{data:a}).then((function(t){t.data.success?(c.emitter.emit("message:push",{message:t.data.message,status:"success"}),c.emitter.emit("resetCart"),c.getCart(),c.isLoading=!1):(c.emitter.emit("message:push",{message:t.data.message,status:"danger"}),c.isLoading=!1)})).catch((function(t){console.warn(t,"error"),c.isLoading=!1}))},delCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wwin5146","/cart/").concat(t);this.isLoading=!0,this.$http.delete(c).then((function(t){t.data.success?(e.emitter.emit("message:push",{message:t.data.message,status:"danger"}),e.emitter.emit("resetCart"),e.getCart(),e.isLoading=!1):(e.emitter.emit("message:push",{message:t.data.message,status:"danger"}),e.isLoading=!1)})).catch((function(t){console.warn(t,"error"),e.isLoading=!1}))},addCouponCode:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wwin5146","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:c}).then((function(e){e.data.success?(t.emitter.emit("message:push",{message:e.data.message,status:"success"}),t.getCart(),t.isLoading=!1):(t.emitter.emit("message:push",{message:e.data.message,status:"danger"}),t.isLoading=!1)})).catch((function(e){console.warn(e,"error"),t.isLoading=!1}))},goProducts:function(){this.$router.push("/products")},goCheckout:function(){this.$router.push("/checkout")}},created:function(){this.getCart()}},V=(c("d74a"),c("6b0d")),A=c.n(V);const Y=A()(U,[["render",S],["__scopeId","data-v-d4e80dec"]]);e["default"]=Y},d74a:function(t,e,c){"use strict";c("a200")}}]);
//# sourceMappingURL=chunk-909bcca0.e1b0cc04.js.map